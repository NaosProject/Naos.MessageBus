// --------------------------------------------------------------------------------------------------------------------
// <copyright file="SerializerFactories.cs" company="OBeautifulCode">
//   Copyright (c) OBeautifulCode 2018. All rights reserved.
// </copyright>
// <auto-generated>
//   Sourced from NuGet package. Will be overwritten with package update except in OBeautifulCode.Serialization.Recipes source.
// </auto-generated>
// --------------------------------------------------------------------------------------------------------------------

namespace OBeautifulCode.Serialization.Recipes
{
    using System.Diagnostics.CodeAnalysis;
    using OBeautifulCode.CodeAnalysis.Recipes;
    using OBeautifulCode.Compression;

    /// <summary>
    /// Builds a serializer to use based on the <see cref="SerializationKind"/> of the specified <see cref="SerializerRepresentation"/>.
    /// </summary>
#if !OBeautifulCodeSerializationSolution
    [global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
    [global::System.CodeDom.Compiler.GeneratedCode("OBeautifulCode.Serialization.Recipes", "See package version number")]
    internal
#else
    public
#endif
    static class SerializerFactories
    {
        private static readonly ICompressorFactory CompressorFactory = OBeautifulCode.Compression.Recipes.CompressorFactory.Instance;

        /// <summary>
        /// A standardized serializer factory.
        /// </summary>
        [SuppressMessage("Microsoft.Security", "CA2104:DoNotDeclareReadOnlyMutableReferenceTypes", Justification = ObcSuppressBecause.CA2104_DoNotDeclareReadOnlyMutableReferenceTypes_TypeIsImmutable)]
        public static readonly ISerializerFactory Standard = new
            CachingSerializerFactory(
                new CompressIfConfiguredSerializerFactory(
                    new SerializationKindResolvingSerializerFactory(),
                    CompressorFactory));

        /// <summary>
        /// A standardized serializer factory that will short-cutting certain trivial types
        /// to improve time and space used.  Particularly useful for common identifier types
        /// (e.g. string) and byte arrays.
        /// </summary>
        [SuppressMessage("Microsoft.Security", "CA2104:DoNotDeclareReadOnlyMutableReferenceTypes", Justification = ObcSuppressBecause.CA2104_DoNotDeclareReadOnlyMutableReferenceTypes_TypeIsImmutable)]        
        public static readonly ISerializerFactory StandardSimplifying =
            new CachingSerializerFactory(
                new CompressIfConfiguredSerializerFactory(
                    new SimplifyingSerializerFactory(
                        new SerializationKindResolvingSerializerFactory()),
                    CompressorFactory));
    }
}
